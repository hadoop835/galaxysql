## DISABLE_FAST_SQL_PARSER
CREATE TABLE `precol_routing_t1_sp` (
`a` varchar(8) DEFAULT NULL,
`b` varchar(8) DEFAULT NULL,
`c` varchar(16) DEFAULT NULL,
`d` varchar(16) DEFAULT NULL,
KEY `auto_shard_key_a_b_c` USING BTREE (`a`, `b`, `c`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`,`b`,`d`)
PARTITIONS 8
SUBPARTITION BY KEY(`b`,`c`,`d`)
SUBPARTITIONS 8
(SUBPARTITION sp1 VALUES LESS THAN (-6917529027641081843,9223372036854775807,9223372036854775807) ,
SUBPARTITION sp2 VALUES LESS THAN (-4611686018427387893,9223372036854775807,9223372036854775807) ,
SUBPARTITION sp3 VALUES LESS THAN (-2305843009213693943,9223372036854775807,9223372036854775807),
SUBPARTITION sp4 VALUES LESS THAN (415880693547541444,-2305843009213693943,9223372036854775807),
SUBPARTITION sp5 VALUES LESS THAN (415880693547541444,4611686018427387907,9223372036854775807),
SUBPARTITION sp6 VALUES LESS THAN (415880693547541444,9223372036854775807,9223372036854775807),
SUBPARTITION sp7 VALUES LESS THAN (6917529027641081857,9223372036854775807,9223372036854775807),
SUBPARTITION sp8 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807) )
(PARTITION p1 VALUES LESS THAN (-6917529027641081843,9223372036854775807,9223372036854775807) ENGINE = InnoDB,
PARTITION p2 VALUES LESS THAN (-4611686018427387893,9223372036854775807,9223372036854775807) ENGINE = InnoDB,
PARTITION p3 VALUES LESS THAN (-2305843009213693943,9223372036854775807,9223372036854775807) ENGINE = InnoDB,
PARTITION p4 VALUES LESS THAN (415880693547541444,-2305843009213693943,9223372036854775807) ENGINE = InnoDB,
PARTITION p5 VALUES LESS THAN (415880693547541444,4611686018427387907,9223372036854775807) ENGINE = InnoDB,
PARTITION p6 VALUES LESS THAN (415880693547541444,9223372036854775807,9223372036854775807) ENGINE = InnoDB,
PARTITION p7 VALUES LESS THAN (6917529027641081857,9223372036854775807,9223372036854775807) ENGINE = InnoDB,
PARTITION p8 VALUES LESS THAN (9223372036854775807,9223372036854775807,9223372036854775807) ENGINE = InnoDB)
set sql_mode=''
insert into precol_routing_t1_sp(a,b,c,d) values ('4234567810', '4234567810', '423456781234567810', '423456781234567810')
select * from precol_routing_t1_sp where a='4234567810' and b='4234567810' and c='423456781234567810'
a,b,c,d
select * from precol_routing_t1_sp where a='42345678' and b='42345678' and c='4234567812345678'
a,b,c,d
42345678,42345678,4234567812345678,4234567812345678
set ENABLE_FAST_PREFIX_PART_COL_EQ_COND_ROUTING=false
## error_msg: $# more than one partitions #$
select * from precol_routing_t1_sp where a='4234567810' and b='4234567810' and c='423456781234567810' and 2000>1000
more than one partitions
set ENABLE_FAST_PREFIX_PART_COL_EQ_COND_ROUTING=true
select * from precol_routing_t1_sp where a='4234567810' and b='4234567810' and c='423456781234567810'
a,b,c,d
drop table precol_routing_t1_sp;