drop table if exists r_s_pk_t1;
drop table if exists r_s_pk_t2;
drop table if exists r_s_pk_t3;

create table r_s_pk_t1(a int, b int, c int, primary key(a)) single;

insert into r_s_pk_t1 values (1, 1, 1),(2, 2, 2),(3, 3, 3);

alter table r_s_pk_t1 partition by key(a) partitions 1;

show create table r_s_pk_t1;

select * from r_s_pk_t1 order by a;

alter table r_s_pk_t1 add unique global index ugsi_b(b) partition by key(b);

show create table r_s_pk_t1;

alter table r_s_pk_t1 partition by key(a) partitions 3;

show create table r_s_pk_t1;

select * from r_s_pk_t1 order by a;


create table r_s_pk_t2(a int, b int, c int, primary key(a)) single;

insert into r_s_pk_t2 values (1, 1, 1),(2, 2, 2),(3, 3, 3);

alter table r_s_pk_t2 partition by key(b) partitions 1;

show create table r_s_pk_t2;

select * from r_s_pk_t2;

alter table r_s_pk_t2 add unique global index ugsi_c(c) partition by key(c);

show create table r_s_pk_t2;

alter table r_s_pk_t2 partition by key(b) partitions 3;

show create table r_s_pk_t2;

select * from r_s_pk_t2 order by a;


create table r_s_pk_t3(a int, b int, c int, primary key(a)) single;

insert into r_s_pk_t3 values (1, 1, 1),(2, 2, 2),(3, 3, 3);

alter table r_s_pk_t3 partition by key(a, b) partitions 1;

show create table r_s_pk_t3;

select * from r_s_pk_t3;

alter table r_s_pk_t3 add unique global index ugsi_c(c) partition by key(c);

show create table r_s_pk_t3;

alter table r_s_pk_t3 partition by key(a, b) partitions 3;

show create table r_s_pk_t3;

select * from r_s_pk_t3 order by a;