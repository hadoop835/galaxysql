## DISABLE_FAST_SQL_PARSER
  ## l_h_tp
drop table if exists l_h_tp1;
drop table if exists l_h_tp2;
create table if not exists l_h_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by hash (a,b) subpartitions 4
(
partition p1 values in ( to_days('2010-01-01') ),
partition p2 values in ( to_days('2020-01-01'), to_days('2040-01-01') )
);
create table if not exists l_h_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by hash (a,b) subpartitions 4
(
partition p1 values in ( to_days('2010-01-01') ),
partition p2 values in ( to_days('2020-01-01'), to_days('2040-01-01') )
);
insert into l_h_tp1 values (1,2,'2010-01-01','aa','bb');
insert into l_h_tp1 values (1,2,'2020-01-01','aa','bb');
insert into l_h_tp1 values (1,2,'2040-01-01','aa','bb');
alter table l_h_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
insert into l_h_tp1 values (2,2,'2010-01-01','aa','bb');
insert into l_h_tp1 values (2,2,'2020-01-01','aa','bb');
insert into l_h_tp1 values (2,2,'2040-01-01','aa','bb');
insert into l_h_tp1 values (2,2,'2050-01-01','aa','bb');
insert into l_h_tp2 values (1,2,'2010-01-01','aa','bb');
insert into l_h_tp2 values (1,2,'2020-01-01','aa','bb');
insert into l_h_tp2 values (1,2,'2040-01-01','aa','bb');
alter table l_h_tp2 add partition( partition p3 values in ( default ));
insert into l_h_tp2 values (2,2,'2010-01-01','aa','bb');
insert into l_h_tp2 values (2,2,'2020-01-01','aa','bb');
insert into l_h_tp2 values (2,2,'2040-01-01','aa','bb');
insert into l_h_tp2 values (2,2,'2050-01-01','aa','bb');
show full create table l_h_tp1;
show full create table l_h_tp2;
select * from l_h_tp1 order by a,b,c,d,e;
select * from l_h_tp2 order by a,b,c,d,e;

  ## l_k_tp
drop table if exists l_k_tp1;
drop table if exists l_k_tp2;
create table if not exists l_k_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by key (a,b) subpartitions 4
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
create table if not exists l_k_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by key (a,b) subpartitions 4
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
insert into l_k_tp1 values (1,2,'2010-01-01','aa','bb');
insert into l_k_tp1 values (1,2,'2020-01-01','aa','bb');
insert into l_k_tp1 values (1,2,'2040-01-01','aa','bb');
alter table l_k_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_k_tp1 add partition( partition p4 values in ( default ));
insert into l_k_tp1 values (2,2,'2010-01-01','aa','bb');
insert into l_k_tp1 values (2,2,'2020-01-01','aa','bb');
insert into l_k_tp1 values (2,2,'2040-01-01','aa','bb');
insert into l_k_tp1 values (2,2,'2050-01-01','aa','bb');
insert into l_k_tp1 values (2,2,'2060-01-01','aa','bb');
insert into l_k_tp2 values (1,2,'2010-01-01','aa','bb');
insert into l_k_tp2 values (1,2,'2020-01-01','aa','bb');
insert into l_k_tp2 values (1,2,'2040-01-01','aa','bb');
alter table l_k_tp2 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_k_tp2 add partition( partition p4 values in ( default ));
insert into l_k_tp2 values (2,2,'2010-01-01','aa','bb');
insert into l_k_tp2 values (2,2,'2020-01-01','aa','bb');
insert into l_k_tp2 values (2,2,'2040-01-01','aa','bb');
insert into l_k_tp2 values (2,2,'2050-01-01','aa','bb');
insert into l_k_tp2 values (2,2,'2060-01-01','aa','bb');
show full create table l_k_tp1;
show full create table l_k_tp2;
select * from l_k_tp1 order by a,b,c,d,e;
select * from l_k_tp2 order by a,b,c,d,e;

  ## l_r_tp
drop table if exists l_r_tp1;
drop table if exists l_r_tp2;
create table if not exists l_r_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( 200000 )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
create table if not exists l_r_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( 200000 )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
insert into l_r_tp1 values (1,2,'2010-01-01','aa','bb');
insert into l_r_tp1 values (1,2,'2020-01-01','aa','bb');
insert into l_r_tp1 values (1,2,'2040-01-01','aa','bb');
alter table l_r_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_r_tp1 add subpartition( subpartition sp3 values less than ( 500000 ));

insert into l_r_tp1 values (1,2,'2010-01-01','aa','bb');
insert into l_r_tp1 values (1000,2,'2020-01-01','aa','bb');
insert into l_r_tp1 values (2000,2,'2040-01-01','aa','bb');
insert into l_r_tp1 values (3000,2,'2050-01-01','aa','bb');
insert into l_r_tp2 values (1,2,'2010-01-01','aa','bb');
insert into l_r_tp2 values (1,2,'2020-01-01','aa','bb');
insert into l_r_tp2 values (1,2,'2040-01-01','aa','bb');
alter table l_r_tp2 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_r_tp2 add subpartition( subpartition sp3 values less than ( 500000 ));
alter table l_r_tp2 add partition( partition p4 values in ( default ));
insert into l_r_tp2 values (1,2,'2010-01-01','aa','bb');
insert into l_r_tp2 values (1000,2,'2020-01-01','aa','bb');
insert into l_r_tp2 values (2000,2,'2040-01-01','aa','bb');
insert into l_r_tp2 values (3000,2,'2050-01-01','aa','bb');
insert into l_r_tp2 values (4000,2,'2060-01-01','aa','bb');
show full create table l_r_tp1;
show full create table l_r_tp2;
select * from l_r_tp1 order by a,b,c,d,e;
select * from l_r_tp2 order by a,b,c,d,e;

  ## l_rc_tp
drop table if exists l_rc_tp1;
drop table if exists l_rc_tp2;
create table if not exists l_rc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( 200000, 200000 )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
create table if not exists l_rc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( 200000, 200000 )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
insert into l_rc_tp1 values (1,2,'2010-01-01','aa','bb');
insert into l_rc_tp1 values (1,2,'2020-01-01','aa','bb');
insert into l_rc_tp1 values (1,2,'2040-01-01','aa','bb');
alter table l_rc_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_rc_tp1 add subpartition( subpartition sp3 values less than ( 500000, 500000 ));

insert into l_rc_tp1 values (1000,2,'2010-01-01','aa','bb');
insert into l_rc_tp1 values (1000,2,'2020-01-01','aa','bb');
insert into l_rc_tp1 values (2000,2,'2040-01-01','aa','bb');
insert into l_rc_tp1 values (2000,2,'2050-01-01','aa','bb');
insert into l_rc_tp2 values (1,2,'2010-01-01','aa','bb');
insert into l_rc_tp2 values (1,2,'2020-01-01','aa','bb');
insert into l_rc_tp2 values (1,2,'2040-01-01','aa','bb');
alter table l_rc_tp2 add partition( partition p3 values in ( to_days('2050-01-01') ));
alter table l_rc_tp2 add subpartition( subpartition sp3 values less than ( 500000, 500000 ));
insert into l_rc_tp2 values (1000,2,'2010-01-01','aa','bb');
insert into l_rc_tp2 values (2000,2,'2020-01-01','aa','bb');
insert into l_rc_tp2 values (2000,2,'2040-01-01','aa','bb');
insert into l_rc_tp2 values (2000,2,'2050-01-01','aa','bb');
show full create table l_rc_tp1;
show full create table l_rc_tp2;
select * from l_rc_tp1 order by a,b,c,d,e;
select * from l_rc_tp2 order by a,b,c,d,e;

  ## l_l_tp
drop table if exists l_l_tp1;
drop table if exists l_l_tp2;
create table if not exists l_l_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
create table if not exists l_l_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
insert into l_l_tp1 values (1000,2,'2010-01-01','aa','bb');
insert into l_l_tp1 values (2000,2,'2020-01-01','aa','bb');
insert into l_l_tp1 values (3000,2,'2040-01-01','aa','bb');
alter table l_l_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
insert into l_l_tp1 values (1000,2,'2010-01-01','aa','bb');
insert into l_l_tp1 values (3000,2,'2020-01-01','aa','bb');
insert into l_l_tp1 values (5000,2,'2040-01-01','aa','bb');
insert into l_l_tp1 values (5000,2,'2050-01-01','aa','bb');
alter table l_l_tp1 drop partition p3;
insert into l_l_tp1 values (1000,2,'2010-01-01','aa','bb');
insert into l_l_tp1 values (3000,2,'2020-01-01','aa','bb');
insert into l_l_tp1 values (5000,2,'2040-01-01','aa','bb');
insert into l_l_tp2 values (1000,2,'2010-01-01','aa','bb');
insert into l_l_tp2 values (2000,2,'2020-01-01','aa','bb');
insert into l_l_tp2 values (3000,2,'2040-01-01','aa','bb');
alter table l_l_tp2 add partition( partition p3 values in ( to_days('2050-01-01') ));
insert into l_l_tp2 values (1000,2,'2010-01-01','aa','bb');
insert into l_l_tp2 values (3000,2,'2020-01-01','aa','bb');
insert into l_l_tp2 values (5000,2,'2040-01-01','aa','bb');
insert into l_l_tp2 values (5000,2,'2050-01-01','aa','bb');
show full create table l_l_tp1;
show full create table l_l_tp2;
select * from l_l_tp1 order by a,b,c,d,e;
select * from l_l_tp2 order by a,b,c,d,e;

  ## l_lc_tp
drop table if exists l_lc_tp1;
drop table if exists l_lc_tp2;
create table if not exists l_lc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
create table if not exists l_lc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list (to_days(c))
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( to_days('2020-01-01') ),
partition p2 values in ( to_days('2010-01-01'), to_days('2040-01-01') )
);
insert into l_lc_tp1 values (1000,2000,'2010-01-01','aa','bb');
insert into l_lc_tp1 values (3000,2000,'2020-01-01','aa','bb');
insert into l_lc_tp1 values (5000,2000,'2040-01-01','aa','bb');
alter table l_lc_tp1 add partition( partition p3 values in ( to_days('2050-01-01') ));
insert into l_lc_tp1 values (1000,2000,'2010-01-01','aa','bb');
insert into l_lc_tp1 values (3000,2000,'2020-01-01','aa','bb');
insert into l_lc_tp1 values (5000,2000,'2040-01-01','aa','bb');
insert into l_lc_tp1 values (5000,2000,'2050-01-01','aa','bb');
insert into l_lc_tp2 values (1000,2000,'2010-01-01','aa','bb');
insert into l_lc_tp2 values (3000,2000,'2020-01-01','aa','bb');
insert into l_lc_tp2 values (5000,2000,'2040-01-01','aa','bb');
alter table l_lc_tp2 add partition( partition p3 values in ( default ));
insert into l_lc_tp2 values (1000,2000,'2010-01-01','aa','bb');
insert into l_lc_tp2 values (3000,2000,'2020-01-01','aa','bb');
insert into l_lc_tp2 values (5000,2000,'2040-01-01','aa','bb');
insert into l_lc_tp2 values (5000,2000,'2070-01-01','aa','bb');
show full create table l_lc_tp1;
show full create table l_lc_tp2;
select * from l_lc_tp1 order by a,b,c,d,e;
select * from l_lc_tp2 order by a,b,c,d,e;

  ## lc_h_tp
drop table if exists lc_h_tp1;
drop table if exists lc_h_tp2;
create table if not exists lc_h_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by hash (a,b) subpartitions 4
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
create table if not exists lc_h_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by hash (a,b) subpartitions 4
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_h_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_h_tp1 values (2,2,'2020-01-01','abc','bb');
insert into lc_h_tp1 values (3,2,'2040-01-01','abc','bb');
alter table lc_h_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
insert into lc_h_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_h_tp1 values (3,2,'2020-01-01','abc','bb');
insert into lc_h_tp1 values (3,2,'2040-01-01','abc','bb');
insert into lc_h_tp1 values (3,2,'2050-01-01','abc','bb');
insert into lc_h_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_h_tp2 values (2,2,'2020-01-01','abc','bb');
insert into lc_h_tp2 values (3,2,'2040-01-01','abc','bb');
alter table lc_h_tp2 add partition( partition p3 values in ( default ));
insert into lc_h_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_h_tp2 values (2,2,'2020-01-01','abc','bb');
insert into lc_h_tp2 values (3,2,'2040-01-01','abc','bb');
insert into lc_h_tp2 values (3,2,'2050-01-01','abc','bb');
show full create table lc_h_tp1;
show full create table lc_h_tp2;
select * from lc_h_tp1 order by a,b,c,d,e;
select * from lc_h_tp2 order by a,b,c,d,e;

  ## lc_k_tp
drop table if exists lc_k_tp1;
drop table if exists lc_k_tp2;
create table if not exists lc_k_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by key (a,b) subpartitions 4
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
create table if not exists lc_k_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by key (a,b) subpartitions 4
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_k_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_k_tp1 values (2,2,'2020-01-01','abc','bb');
insert into lc_k_tp1 values (3,2,'2040-01-01','abc','bb');
alter table lc_k_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
insert into lc_k_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_k_tp1 values (3,2,'2020-01-01','abc','bb');
insert into lc_k_tp1 values (3,2,'2040-01-01','abc','bb');
insert into lc_k_tp1 values (3,2,'2050-01-01','abc','bb');
insert into lc_k_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_k_tp2 values (2,2,'2020-01-01','abc','bb');
insert into lc_k_tp2 values (3,2,'2040-01-01','abc','bb');
alter table lc_k_tp2 add partition( partition p3 values in ( default ));
insert into lc_k_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_k_tp2 values (2,2,'2020-01-01','abc','bb');
insert into lc_k_tp2 values (3,2,'2040-01-01','abc','bb');
insert into lc_k_tp2 values (3,2,'2050-01-01','abc','bb');
show full create table lc_k_tp1;
show full create table lc_k_tp2;
select * from lc_k_tp1 order by a,b,c,d,e;
select * from lc_k_tp2 order by a,b,c,d,e;

  ## lc_r_tp
drop table if exists lc_r_tp1;
drop table if exists lc_r_tp2;
create table if not exists lc_r_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( 200000 )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
create table if not exists lc_r_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( 200000 )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_r_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_r_tp1 values (2000,2,'2020-01-01','abc','bb');
insert into lc_r_tp1 values (3000,2,'2040-01-01','abc','bb');
alter table lc_r_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
alter table lc_r_tp1 add subpartition( subpartition sp3 values less than ( 500000 ));

insert into lc_r_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_r_tp1 values (2000,2,'2020-01-01','abc','bb');
insert into lc_r_tp1 values (3000,2,'2040-01-01','abc','bb');
insert into lc_r_tp1 values (3000,2,'2050-01-01','abc','bb');
insert into lc_r_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_r_tp2 values (2000,2,'2020-01-01','abc','bb');
insert into lc_r_tp2 values (3000,2,'2040-01-01','abc','bb');
alter table lc_r_tp2 add partition( partition p3 values in ( default ));
alter table lc_r_tp2 add subpartition( subpartition sp3 values less than ( 500000 ));

insert into lc_r_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_r_tp2 values (2000,2,'2020-01-01','abc','bb');
insert into lc_r_tp2 values (3000,2,'2040-01-01','abc','bb');
insert into lc_r_tp2 values (3000,2,'2070-01-01','abc','bb');
show full create table lc_r_tp1;
show full create table lc_r_tp2;
select * from lc_r_tp1 order by a,b,c,d,e;
select * from lc_r_tp2 order by a,b,c,d,e;

  ## lc_rc_tp
drop table if exists lc_rc_tp1;
drop table if exists lc_rc_tp2;
create table if not exists lc_rc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( 200000, 200000 )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
create table if not exists lc_rc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( 200000, 200000 )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_rc_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_rc_tp1 values (2000,2,'2020-01-01','abc','bb');
insert into lc_rc_tp1 values (3000,2,'2040-01-01','abc','bb');
alter table lc_rc_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
alter table lc_rc_tp1 add subpartition( subpartition sp3 values less than ( 500000, 500000 ));

insert into lc_rc_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_rc_tp1 values (2000,2,'2020-01-01','abc','bb');
insert into lc_rc_tp1 values (3000,2,'2040-01-01','abc','bb');
insert into lc_rc_tp1 values (3000,2,'2050-01-01','abc','bb');
insert into lc_rc_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_rc_tp2 values (2000,2,'2020-01-01','abc','bb');
insert into lc_rc_tp2 values (3000,2,'2040-01-01','abc','bb');
alter table lc_rc_tp2 add partition( partition p3 values in ( default ));
alter table lc_rc_tp2 add subpartition( subpartition sp3 values less than ( 500000, 500000 ));

insert into lc_rc_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_rc_tp2 values (100,2,'2020-01-01','abc','bb');
insert into lc_rc_tp2 values (300,2,'2040-01-01','abc','bb');
insert into lc_rc_tp2 values (300,2,'2011-01-01','abc','bb');
alter table lc_rc_tp2 drop partition p2;
show full create table lc_rc_tp1;
show full create table lc_rc_tp2;
select * from lc_rc_tp1 order by a,b,c,d,e;
select * from lc_rc_tp2 order by a,b,c,d,e;

  ## lc_l_tp
drop table if exists lc_l_tp1;
drop table if exists lc_l_tp2;
create table if not exists lc_l_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
create table if not exists lc_l_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_l_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_l_tp1 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_l_tp1 values (3000,2,'2040-01-01','abc','bb');
alter table lc_l_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
insert into lc_l_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_l_tp1 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_l_tp1 values (3000,2,'2040-01-01','abc','bb');
insert into lc_l_tp1 values (3000,2,'2050-01-01','abc','bb');
insert into lc_l_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_l_tp2 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_l_tp2 values (3000,2,'2040-01-01','abc','bb');
alter table lc_l_tp2 add partition( partition p3 values in ( default ));
insert into lc_l_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_l_tp2 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_l_tp2 values (3000,2,'2040-01-01','abc','bb');
insert into lc_l_tp2 values (3000,2,'2023-01-01','ac','bb');
alter table lc_l_tp2 drop partition p1;
insert into lc_l_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_l_tp2 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_l_tp2 values (3000,2,'2040-01-01','abc','bb');
show full create table lc_l_tp1;
show full create table lc_l_tp2;
select * from lc_l_tp1 order by a,b,c,d,e;
select * from lc_l_tp2 order by a,b,c,d,e;

  ## lc_lc_tp
drop table if exists lc_lc_tp1;
drop table if exists lc_lc_tp2;
create table if not exists lc_lc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( default )
);
create table if not exists lc_lc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by list columns (c,d)
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values in ( ('2020-01-01', 'abc') ),
partition p2 values in ( ('2010-01-01', 'abc'),('2040-01-01', 'abc') )
);
insert into lc_lc_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_lc_tp1 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_lc_tp1 values (3000,2,'2040-01-01','abc','bb');
alter table lc_lc_tp1 add partition( partition p3 values in ( ('2050-01-01', 'abc') ));
insert into lc_lc_tp1 values (1,2,'2010-01-01','abc','bb');
insert into lc_lc_tp1 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_lc_tp1 values (3000,2,'2040-01-01','abc','bb');
insert into lc_lc_tp1 values (3000,2,'2050-01-01','abc','bb');
insert into lc_lc_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_lc_tp2 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_lc_tp2 values (3000,2,'2040-01-01','abc','bb');
alter table lc_lc_tp2 add partition( partition p3 values in ( default ));
alter table lc_lc_tp2 drop subpartition sp1;
insert into lc_lc_tp2 values (1,2,'2010-01-01','abc','bb');
insert into lc_lc_tp2 values (1000,2000,'2020-01-01','abc','bb');
insert into lc_lc_tp2 values (3000,2,'2040-01-01','abc','bb');
show full create table lc_lc_tp1;
show full create table lc_lc_tp2;
select * from lc_lc_tp1 order by a,b,c,d,e;
select * from lc_lc_tp2 order by a,b,c,d,e;
