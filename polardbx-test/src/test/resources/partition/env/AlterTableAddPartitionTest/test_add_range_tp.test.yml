## DISABLE_FAST_SQL_PARSER
  ## r_h_tp
drop table if exists r_h_tp1;
drop table if exists r_h_tp2;
create table if not exists r_h_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by hash (a,b) subpartitions 4
(
 partition p1 values less than ( to_days('2020-01-01') ),
 partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_h_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by hash (a,b) subpartitions 4
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_h_tp1 values (100,2,'2010-01-01','a','b');
insert into r_h_tp1 values (200,2,'2020-01-01','a','b');
insert into r_h_tp1 values (300,2,'2040-01-01','a','b');
alter table r_h_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_h_tp1 values (400,2,'2010-01-01','a','b');
insert into r_h_tp1 values (500,2,'2020-01-01','a','b');
insert into r_h_tp1 values (600,2,'2049-01-01','a','b');
insert into r_h_tp2 values (100,2,'2010-01-01','a','b');
insert into r_h_tp2 values (200,2,'2020-01-01','a','b');
insert into r_h_tp2 values (300,2,'2040-01-01','a','b');
alter table r_h_tp2 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_h_tp2 values (400,2,'2010-01-01','a','b');
insert into r_h_tp2 values (500,2,'2020-01-01','a','b');
insert into r_h_tp2 values (600,2,'2048-01-01','a','b');
show full create table r_h_tp1;
show full create table r_h_tp2;
select * from r_h_tp1 order by a,b,c,d,e;
select * from r_h_tp2 order by a,b,c,d,e;

  ## r_k_tp
drop table if exists r_k_tp1;
drop table if exists r_k_tp2;
create table if not exists r_k_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by key (a,b) subpartitions 4
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_k_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by key (a,b) subpartitions 4
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_k_tp1 values (100,2,'2010-01-01','a','b');
insert into r_k_tp1 values (200,2,'2020-01-01','a','b');
insert into r_k_tp1 values (300,2,'2040-01-01','a','b');
alter table r_k_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_k_tp1 values (400,2,'2010-01-01','a','b');
insert into r_k_tp1 values (500,2,'2020-01-01','a','b');
insert into r_k_tp1 values (600,2,'2045-01-01','a','b');
insert into r_k_tp2 values (100,2,'2010-01-01','a','b');
insert into r_k_tp2 values (200,2,'2020-01-01','a','b');
insert into r_k_tp2 values (300,2,'2040-01-01','a','b');
alter table r_k_tp2 add partition ( partition p3 values less than ( to_days('2060-01-01') ));
insert into r_k_tp2 values (400,2,'2010-01-01','a','b');
insert into r_k_tp2 values (500,2,'2051-01-01','a','b');
insert into r_k_tp2 values (600,2,'2032-01-01','a','b');
show full create table r_k_tp1;
show full create table r_k_tp2;
select * from r_k_tp1 order by a,b,c,d,e;
select * from r_k_tp2 order by a,b,c,d,e;

  ## r_r_tp
drop table if exists r_r_tp1;
drop table if exists r_r_tp2;
create table if not exists r_r_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by range (a)
(
  subpartition sp1 values less than ( 1000),
  subpartition sp2 values less than ( maxvalue )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_r_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( maxvalue )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_r_tp1 values (100,2,'2010-01-01','a','b');
insert into r_r_tp1 values (2000,2,'2020-01-01','a','b');
insert into r_r_tp1 values (3000,2,'2040-01-01','a','b');
alter table r_r_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_r_tp1 values (200,2,'2010-01-01','a','b');
insert into r_r_tp1 values (1500,2,'2020-01-01','a','b');
insert into r_r_tp1 values (3000,2,'2045-01-01','a','b');
alter table r_r_tp1 add partition ( partition p4 values less than ( to_days('2060-01-01') ));
insert into r_r_tp1 values (400,2,'2010-01-01','a','b');
insert into r_r_tp1 values (500,2,'2051-01-01','a','b');
insert into r_r_tp1 values (600,2,'2040-01-01','a','b');
insert into r_r_tp2 values (100,2,'2010-01-01','a','b');
insert into r_r_tp2 values (2000,2,'2020-01-01','a','b');
insert into r_r_tp2 values (3000,2,'2040-01-01','a','b');
alter table r_r_tp2 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_r_tp2 values (200,2,'2010-01-01','a','b');
insert into r_r_tp2 values (1500,2,'2011-01-01','a','b');
insert into r_r_tp2 values (3000,2,'2042-01-01','a','b');
alter table r_r_tp2 drop subpartition sp2;
insert into r_r_tp2 values (400,2,'2010-01-01','a','b');
insert into r_r_tp2 values (500,2,'2011-01-01','a','b');
insert into r_r_tp2 values (600,2,'2012-01-01','a','b');
show full create table r_r_tp1;
show full create table r_r_tp2;
select * from r_r_tp1 order by a,b,c,d,e;
select * from r_r_tp2 order by a,b,c,d,e;

  ## r_rc_tp
drop table if exists r_rc_tp1;
drop table if exists r_rc_tp2;
create table if not exists r_rc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( maxvalue, maxvalue )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_rc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 10000),
subpartition sp2 values less than ( maxvalue, maxvalue )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_rc_tp1 values (100,2,'2010-01-01','a','b');
insert into r_rc_tp1 values (2000,2,'2020-01-01','a','b');
insert into r_rc_tp1 values (3000,2,'2040-01-01','a','b');
alter table r_rc_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_rc_tp1 values (200,2,'2010-01-01','a','b');
insert into r_rc_tp1 values (1500,2,'2020-01-01','a','b');
insert into r_rc_tp1 values (3000,2,'2043-01-01','a','b');
insert into r_rc_tp2 values (100,2,'2010-01-01','a','b');
insert into r_rc_tp2 values (2000,2,'2020-01-01','a','b');
insert into r_rc_tp2 values (3000,2,'2040-01-01','a','b');
alter table r_rc_tp2 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_rc_tp2 values (200,2,'2010-01-01','a','b');
insert into r_rc_tp2 values (1500,2,'2011-01-01','a','b');
insert into r_rc_tp2 values (3000,2,'2042-01-01','a','b');
alter table r_rc_tp2 drop subpartition sp2;
insert into r_rc_tp2 values (400,2,'2010-01-01','a','b');
insert into r_rc_tp2 values (500,2,'2011-01-01','a','b');
insert into r_rc_tp2 values (600,2,'2032-01-01','a','b');
show full create table r_rc_tp1;
show full create table r_rc_tp2;
select * from r_rc_tp1 order by a,b,c,d,e;
select * from r_rc_tp2 order by a,b,c,d,e;

  ## r_l_tp
drop table if exists r_l_tp1;
drop table if exists r_l_tp2;
create table if not exists r_l_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_l_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_l_tp1 values (100,2,'2010-01-01','a','b');
insert into r_l_tp1 values (2000,2,'2020-01-01','a','b');
insert into r_l_tp1 values (3000,2,'2040-01-01','a','b');
alter table r_l_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_l_tp1 values (200,2,'2010-01-01','a','b');
insert into r_l_tp1 values (1500,2,'2020-01-01','a','b');
insert into r_l_tp1 values (3000,2,'2042-01-01','a','b');
alter table r_l_tp1 drop subpartition sp1;
insert into r_l_tp1 values (400,2,'2010-01-01','a','b');
insert into r_l_tp1 values (500,2,'2011-01-01','a','b');
insert into r_l_tp1 values (600,2,'2040-01-01','a','b');
insert into r_l_tp2 values (100,2,'2010-01-01','a','b');
insert into r_l_tp2 values (2000,2,'2020-01-01','a','b');
insert into r_l_tp2 values (3000,2,'2040-01-01','a','b');
alter table r_l_tp2 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_l_tp2 values (200,2,'2010-01-01','a','b');
insert into r_l_tp2 values (1500,2,'2031-01-01','a','b');
insert into r_l_tp2 values (3000,2,'2042-01-01','a','b');
alter table r_l_tp2 drop subpartition sp1;
insert into r_l_tp2 values (400,2,'2010-01-01','a','b');
insert into r_l_tp2 values (500,2,'2011-01-01','a','b');
insert into r_l_tp2 values (600,2,'2012-01-01','a','b');
show full create table r_l_tp1;
show full create table r_l_tp2;
select * from r_l_tp1 order by a,b,c,d,e;
select * from r_l_tp2 order by a,b,c,d,e;

  ## r_lc_tp
drop table if exists r_lc_tp1;
drop table if exists r_lc_tp2;
create table if not exists r_lc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
create table if not exists r_lc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range (to_days(c))
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000) ),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( to_days('2020-01-01') ),
partition p2 values less than ( to_days('2041-01-01') )
);
insert into r_lc_tp1 values (1000,2000,'2010-01-01','a','b');
insert into r_lc_tp1 values (2000,2,'2020-01-01','a','b');
insert into r_lc_tp1 values (3000,2,'2040-01-01','a','b');
alter table r_lc_tp1 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_lc_tp1 values (2000,2,'2010-01-01','a','b');
insert into r_lc_tp1 values (1500,2,'2020-01-01','a','b');
insert into r_lc_tp1 values (3000,2,'2044-01-01','a','b');
insert into r_lc_tp2 values (1000,2000,'2010-01-01','a','b');
insert into r_lc_tp2 values (2000,2,'2020-01-01','a','b');
insert into r_lc_tp2 values (3000,2,'2040-01-01','a','b');
alter table r_lc_tp2 add partition ( partition p3 values less than ( to_days('2050-01-01') ));
insert into r_lc_tp2 values (2000,2,'2010-01-01','a','b');
insert into r_lc_tp2 values (1500,2,'2011-01-01','a','b');
insert into r_lc_tp2 values (3000,2,'2042-01-01','a','b');
alter table r_lc_tp2 drop subpartition sp2;
insert into r_lc_tp2 values (1000,2000,'2010-01-01','a','b');
insert into r_lc_tp2 values (1000,2000,'2011-01-01','a','b');
insert into r_lc_tp2 values (1000,2000,'2040-01-01','a','b');
show full create table r_lc_tp1;
show full create table r_lc_tp2;
select * from r_lc_tp1 order by a,b,c,d,e;
select * from r_lc_tp2 order by a,b,c,d,e;

#########

  ## rc_h_tp
drop table if exists rc_h_tp1;
drop table if exists rc_h_tp2;
create table if not exists rc_h_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by hash (a,b) subpartitions 4
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_h_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by hash (a,b) subpartitions 4
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_h_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_h_tp1 values (2,2,'2020-01-01','a','b');
insert into rc_h_tp1 values (3,2,'2040-01-01','a','b');
alter table rc_h_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_h_tp1 values (2,2,'2010-01-01','a','b');
insert into rc_h_tp1 values (3,2,'2031-01-01','a','b');
insert into rc_h_tp1 values (3,2,'2044-01-01','a','b');
insert into rc_h_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_h_tp2 values (2,2,'2020-01-01','a','b');
insert into rc_h_tp2 values (3,2,'2040-01-01','a','b');
alter table rc_h_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_h_tp2 values (2,2,'2010-01-01','a','b');
insert into rc_h_tp2 values (3,2,'2021-01-01','a','b');
insert into rc_h_tp2 values (3,2,'2042-01-01','a','b');
show full create table rc_h_tp1;
show full create table rc_h_tp2;
select * from rc_h_tp1 order by a,b,c,d,e;
select * from rc_h_tp2 order by a,b,c,d,e;

  ## rc_k_tp
drop table if exists rc_k_tp1;
drop table if exists rc_k_tp2;
create table if not exists rc_k_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by key (a,b) subpartitions 4
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_k_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by key (a,b) subpartitions 4
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_k_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_k_tp1 values (2,2,'2020-01-01','a','b');
insert into rc_k_tp1 values (3,2,'2040-01-01','a','b');
alter table rc_k_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_k_tp1 values (2,2,'2010-01-01','a','b');
insert into rc_k_tp1 values (3,2,'2031-01-01','a','b');
insert into rc_k_tp1 values (3,2,'2042-01-01','a','b');
insert into rc_k_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_k_tp2 values (2,2,'2020-01-01','a','b');
insert into rc_k_tp2 values (3,2,'2040-01-01','a','b');
alter table rc_k_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_k_tp2 values (2,2,'2010-01-01','a','b');
insert into rc_k_tp2 values (3,2,'2041-01-01','a','b');
insert into rc_k_tp2 values (3,2,'2012-01-01','a','b');
show full create table rc_k_tp1;
show full create table rc_k_tp2;
select * from rc_k_tp1 order by a,b,c,d,e;
select * from rc_k_tp2 order by a,b,c,d,e;

  ## rc_r_tp
drop table if exists rc_r_tp1;
drop table if exists rc_r_tp2;
create table if not exists rc_r_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( maxvalue )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_r_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by range (a)
(
subpartition sp1 values less than ( 1000),
subpartition sp2 values less than ( maxvalue )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_r_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_r_tp1 values (1500,2,'2020-01-01','a','b');
insert into rc_r_tp1 values (3000,2,'2040-01-01','a','b');
alter table rc_r_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_r_tp1 values (150,2,'2010-01-01','a','b');
insert into rc_r_tp1 values (3000,2,'2031-01-01','a','b');
insert into rc_r_tp1 values (3000,2,'2045-01-01','a','b');
alter table rc_r_tp1 add partition ( partition p4 values less than ( '2060-01-01','abc' ));
insert into rc_r_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_r_tp1 values (1500,2,'2050-01-01','a','b');
insert into rc_r_tp1 values (3000,2,'2045-01-01','a','b');
insert into rc_r_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_r_tp2 values (1500,2,'2020-01-01','a','b');
insert into rc_r_tp2 values (3000,2,'2040-01-01','a','b');
alter table rc_r_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_r_tp2 values (150,2,'2010-01-01','a','b');
insert into rc_r_tp2 values (3000,2,'2031-01-01','a','b');
insert into rc_r_tp2 values (3000,2,'2042-01-01','a','b');
alter table rc_r_tp2 add partition ( partition p4 values less than ( '2060-01-01','abc' ));
insert into rc_r_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_r_tp2 values (1500,2,'2050-01-01','a','b');
insert into rc_r_tp2 values (3000,2,'2048-01-01','a','b');
show full create table rc_r_tp1;
show full create table rc_r_tp2;
select * from rc_r_tp1 order by a,b,c,d,e;
select * from rc_r_tp2 order by a,b,c,d,e;

  ## rc_rc_tp
drop table if exists rc_rc_tp1;
drop table if exists rc_rc_tp2;
create table if not exists rc_rc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 2000),
subpartition sp2 values less than ( maxvalue, maxvalue )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_rc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by range columns (a,b)
(
subpartition sp1 values less than ( 1000, 2000),
subpartition sp2 values less than ( maxvalue, maxvalue )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_rc_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_rc_tp1 values (1500,2,'2020-01-01','a','b');
insert into rc_rc_tp1 values (3000,2,'2040-01-01','a','b');
alter table rc_rc_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_rc_tp1 values (150,2,'2010-01-01','a','b');
insert into rc_rc_tp1 values (3000,2,'2011-01-01','a','b');
insert into rc_rc_tp1 values (3000,2,'2046-01-01','a','b');
alter table rc_rc_tp1 drop subpartition sp1;
insert into rc_rc_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_rc_tp1 values (1500,2,'2020-01-01','a','b');
insert into rc_rc_tp1 values (3000,2,'2040-01-01','a','b');
insert into rc_rc_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_rc_tp2 values (1500,2,'2020-01-01','a','b');
insert into rc_rc_tp2 values (3000,2,'2040-01-01','a','b');
alter table rc_rc_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_rc_tp2 values (150,2,'2010-01-01','a','b');
insert into rc_rc_tp2 values (1000,2,'2011-01-01','a','b');
insert into rc_rc_tp2 values (1000,200,'2042-01-01','a','b');
show full create table rc_rc_tp1;
show full create table rc_rc_tp2;
select * from rc_rc_tp1 order by a,b,c,d,e;
select * from rc_rc_tp2 order by a,b,c,d,e;

  ## rc_l_tp
drop table if exists rc_l_tp1;
drop table if exists rc_l_tp2;
create table if not exists rc_l_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_l_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by list (a)
(
subpartition sp1 values in ( 1000, 2000),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_l_tp1 values (1000,2,'2010-01-01','a','b');
insert into rc_l_tp1 values (2000,2,'2020-01-01','a','b');
insert into rc_l_tp1 values (3000,2,'2040-01-01','a','b');
alter table rc_l_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_l_tp1 values (150,2,'2010-01-01','a','b');
insert into rc_l_tp1 values (1000,2,'2011-01-01','a','b');
insert into rc_l_tp1 values (3000,2,'2045-01-01','a','b');
alter table rc_l_tp1 add partition ( partition p4 values less than ( '2060-01-01','abc' ));
insert into rc_l_tp1 values (1,2,'2010-01-01','a','b');
insert into rc_l_tp1 values (1500,2,'2050-01-01','a','b');
insert into rc_l_tp1 values (3000,2,'2046-01-01','a','b');
insert into rc_l_tp2 values (1000,2,'2010-01-01','a','b');
insert into rc_l_tp2 values (1500,2,'2020-01-01','a','b');
insert into rc_l_tp2 values (3000,2,'2040-01-01','a','b');
alter table rc_l_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_l_tp2 values (150,2,'2010-01-01','a','b');
insert into rc_l_tp2 values (1000,2,'2031-01-01','a','b');
insert into rc_l_tp2 values (3000,2,'2045-01-01','a','b');
alter table rc_l_tp2 add partition ( partition p4 values less than ( '2060-01-01','abc' ));
insert into rc_l_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_l_tp2 values (1500,2,'2050-01-01','a','b');
insert into rc_l_tp2 values (3000,2,'2049-01-01','a','b');
show full create table rc_l_tp1;
show full create table rc_l_tp2;
select * from rc_l_tp1 order by a,b,c,d,e;
select * from rc_l_tp2 order by a,b,c,d,e;

  ## rc_lc_tp
drop table if exists rc_lc_tp1;
drop table if exists rc_lc_tp2;
create table if not exists rc_lc_tp1 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000)),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
create table if not exists rc_lc_tp2 (
a bigint unsigned not null,
b bigint unsigned not null,
c datetime NOT NULL,
d varchar(16) NOT NULL,
e varchar(16) NOT NULL
)
partition by range columns (c,d)
subpartition by list columns (a,b)
(
subpartition sp1 values in ( (1000, 2000)),
subpartition sp2 values in ( default )
)
(
partition p1 values less than ( '2020-01-01','abc' ),
partition p2 values less than ( '2041-01-01','abc' )
);
insert into rc_lc_tp1 values (1000,2000,'2010-01-01','a','b');
insert into rc_lc_tp1 values (1500,2,'2020-01-01','a','b');
insert into rc_lc_tp1 values (3000,2,'2040-01-01','a','b');
alter table rc_lc_tp1 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_lc_tp1 values (150,2,'2010-01-01','a','b');
insert into rc_lc_tp1 values (1000,2000,'2011-01-01','a','b');
insert into rc_lc_tp1 values (3000,2,'2045-01-01','a','b');
insert into rc_lc_tp2 values (1000,2000,'2010-01-01','a','b');
insert into rc_lc_tp2 values (1500,2,'2020-01-01','a','b');
insert into rc_lc_tp2 values (3000,2,'2040-01-01','a','b');
alter table rc_lc_tp2 add partition ( partition p3 values less than ( '2050-01-01','abc' ));
insert into rc_lc_tp2 values (150,2,'2010-01-01','a','b');
insert into rc_lc_tp2 values (1000,2000,'2011-01-01','a','b');
insert into rc_lc_tp2 values (3000,2,'2042-01-01','a','b');
alter table rc_lc_tp2 drop subpartition sp1;
insert into rc_lc_tp2 values (1,2,'2010-01-01','a','b');
insert into rc_lc_tp2 values (1500,2,'2011-01-01','a','b');
insert into rc_lc_tp2 values (3000,2,'2012-01-01','a','b');
show full create table rc_lc_tp1;
show full create table rc_lc_tp2;
select * from rc_lc_tp1 order by a,b,c,d,e;
select * from rc_lc_tp2 order by a,b,c,d,e;
