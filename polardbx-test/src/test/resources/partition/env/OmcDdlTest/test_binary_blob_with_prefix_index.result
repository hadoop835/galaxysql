## DISABLE_FAST_SQL_PARSER
set @sql_mode_tmp1 = @@sql_mode
set sql_mode=''
drop table if exists omc_with_prefix_idx_t1
create table omc_with_prefix_idx_t1 (
a int,
b bigint,
c varchar(30),
d varchar(100),
index idx_bcd(b,c(20),d),
index idx_bcd_prefix(b,c(10),d(20)),
global index gsi_dbc(b,c(20),d) partition by key(b),
primary key(a)
) engine = InnoDB
partition by key(a)
alter table omc_with_prefix_idx_t1 modify column b varchar(100), ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` varchar(30) DEFAULT NULL,
	`d` varchar(100) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`(20), `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`(20), `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`(20))
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c varbinary(40), ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` varbinary(40) DEFAULT NULL,
	`d` varchar(100) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`(20), `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`(20), `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`(20))
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c varbinary(50), ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` varbinary(50) DEFAULT NULL,
	`d` varchar(100) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`(20), `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`(20), `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`(20))
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c blob, ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` blob,
	`d` varchar(100) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`(20), `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`(20), `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`(20))
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c longblob, modify column d int after c, ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` longblob,
	`d` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`(20), `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`(20), `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c varbinary(15), ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` varbinary(15) DEFAULT NULL,
	`d` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`, `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`, `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`(10), `d`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column c varbinary(5), ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` varchar(100) DEFAULT NULL,
	`c` varbinary(5) DEFAULT NULL,
	`d` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`, `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`, `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`, `d`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
alter table omc_with_prefix_idx_t1 modify column b bigint, ALGORITHM=OMC
show full create table omc_with_prefix_idx_t1
Table,Create Table
omc_with_prefix_idx_t1,CREATE TABLE `omc_with_prefix_idx_t1` (
	`a` int(11) NOT NULL,
	`b` bigint(20) DEFAULT NULL,
	`c` varbinary(5) DEFAULT NULL,
	`d` int(11) DEFAULT NULL,
	PRIMARY KEY (`a`),
	GLOBAL INDEX /* gsi_dbc_$ */ `gsi_dbc` (`b`, `c`, `d`)
		PARTITION BY KEY(`b`)
		PARTITIONS 3,
	LOCAL KEY `idx_bcd` (`b`, `c`, `d`),
	LOCAL KEY `idx_bcd_prefix` (`b`, `c`, `d`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
/* tablegroup = `tg` */
set sql_mode = @sql_mode_tmp1;